{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["//++імпорт модулів\n// iziToast\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n//++simplelightbox\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n//++import axios\nimport axios from 'axios';\n\n\n\n\nconst myForm = document.querySelector('form');\nconst messageLoad = document.getElementById('searchImageText');\nconst container = document.querySelector('.container-image');\nconst loadMoreButton = document.getElementById('loadMoreButton');\nlet currentPages = 1;\nlet imageArray;\nlet totalHits=0;\nlet inputValue='';\nlet galleryDll;\n\n//Запускаємо галерею після заванатаження сторінки\ndocument.addEventListener('DOMContentLoaded', function() {\n  openLightbox();\n});\n//--\n\n\n//++loadMoreButton\nloadMoreButton.addEventListener('click', event => {\n\n  const galleryCardHeight = document.querySelector('.photo-card').getBoundingClientRect().height;\n  currentPages += 1;\n\n  showHidemessageLoad();\n  \n\n  getImage(inputValue)\n  .then(posts => {\n    imageArray = posts;\n    if (imageArray.length === 0) {\n      showHidemessageLoad();\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      render();\n      loadMoreButton.classList.add('isHidden');\n    } else {\n      showHidemessageLoad();\n      loadMoreButton.classList.remove('isHidden');\n      imageArray.push(...posts);\n      render(true);\n      controlEndsOfImage();\n      // openLightbox();\n      galleryDll.refresh();\n\n      window.scrollBy({\n        top: galleryCardHeight * 2,\n        behavior: 'smooth'\n      });\n\n    }\n  })\n\n});\n//--\n\n\n\n//++myForm\nmyForm.addEventListener('submit', event => {\n  event.preventDefault();\n\n  const searchInput = document.getElementById('searchImage');\n  inputValue = searchInput.value;\n\n  if (inputValue.trim() === '') {\n    iziToast.info({\n      message: 'Please enter what you want to find!',\n      position: 'topRight',\n    });\n    return;\n  } else {\n    currentPages = 1;\n    showHidemessageLoad();\n    getImage(inputValue)\n      .then(posts => {\n        imageArray = posts;\n        if (imageArray.length === 0) {\n          showHidemessageLoad();\n          iziToast.error({\n            message:\n              'Sorry, there are no images matching your search query. Please try again!',\n            position: 'topRight',\n          });\n          render();\n          loadMoreButton.classList.add('isHidden');\n        } else if (totalHits <= 15) {\n          showHidemessageLoad();\n          render();\n          loadMoreButton.classList.add('isHidden');\n          // openLightbox();\n          galleryDll.refresh();\n\n          iziToast.info({\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topRight',\n          });\n          return;\n        } else {\n          showHidemessageLoad();\n          loadMoreButton.classList.remove('isHidden');\n          render();\n          // openLightbox();\n\n          galleryDll.refresh();\n        }\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  }\n});\n//--\n\n//++pixabay\nasync function getImage(inputValue) {\n\n  const API_KEY = '25736683-f5d7a17cce89782c978955728';\n  const URL =\n    'https://pixabay.com/api/?key=' +\n    API_KEY +\n    '&q=' +\n    encodeURIComponent(inputValue) +\n    '&image_type=photo&orientation=horizontal&safe_search=true&page='+currentPages+'&per_page=15&';\n\n  const response = await axios.get (URL, );\n  totalHits = response.data.totalHits;\n  return response.data.hits;\n\n}\n//--\n\n//++Керування відображенням напису завантаження\nfunction showHidemessageLoad() {\n  messageLoad.classList.toggle('isHidden');\n}\n//--\n\n\n\n//++Рендер структури галереї \nfunction productTemplate(item) {\n\n  return `<div class=\"photo-card\">\n    <a href=\"${item.largeImageURL}\" class=\"gallery-link\">\n      <img src=\"${item.webformatURL}\" alt=\"${item.tags}\" loading=\"lazy\" class=\"gallery-image\" />\n    </a>\n    <div class=\"info\">\n      <p class=\"info-item\">\n        <b>Likes:</b> ${item.likes}\n      </p>\n      <p class=\"info-item\">\n        <b>Views:</b> ${item.views}\n      </p>\n      <p class=\"info-item\">\n        <b>Comments:</b> ${item.comments}\n      </p>\n      <p class=\"info-item\">\n        <b>Downloads:</b> ${item.downloads}\n      </p>\n    </div>\n  </div>`;\n\n}\n\nfunction productListTemplate() {\n  return imageArray.map(productTemplate).join('');\n}\n\nfunction render(addMore = false) {\n  const markup = productListTemplate();\n\n  if (addMore) {\n    container.insertAdjacentHTML('beforeend', markup);\n  } else  {\n  container.innerHTML = markup;\n}\n\n}\n//--\n\nfunction controlEndsOfImage() {\n  if (imageArray.length === totalHits) {\n    loadMoreButton.classList.add('isHidden');\n    iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n  }\n}\n\n\n//++Підключення Lightbox\nfunction openLightbox() {\n\n  let options = {\n    captionsData: 'alt',\n    captionDelay: 250,\n    captions: true,\n\n  };\n\n  galleryDll = new SimpleLightbox('.container-image a', options);\n  galleryDll.on('show.simplelightbox', function () {});\n  galleryDll.refresh();\n}\n//--"],"names":["myForm","messageLoad","container","loadMoreButton","currentPages","imageArray","totalHits","inputValue","galleryDll","openLightbox","event","galleryCardHeight","showHidemessageLoad","getImage","posts","iziToast","render","controlEndsOfImage","error","URL","response","axios","productTemplate","item","productListTemplate","addMore","markup","options","SimpleLightbox"],"mappings":"owBAeA,MAAMA,EAAS,SAAS,cAAc,MAAM,EACtCC,EAAc,SAAS,eAAe,iBAAiB,EACvDC,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAiB,SAAS,eAAe,gBAAgB,EAC/D,IAAIC,EAAe,EACfC,EACAC,EAAU,EACVC,EAAW,GACXC,EAGJ,SAAS,iBAAiB,mBAAoB,UAAW,CACvDC,GACF,CAAC,EAKDN,EAAe,iBAAiB,QAASO,GAAS,CAEhD,MAAMC,EAAoB,SAAS,cAAc,aAAa,EAAE,sBAAuB,EAAC,OACxFP,GAAgB,EAEhBQ,IAGAC,EAASN,CAAU,EAClB,KAAKO,GAAS,CACbT,EAAaS,EACTT,EAAW,SAAW,GACxBO,IACAG,EAAS,MAAM,CACb,QACE,2EACF,SAAU,UAClB,CAAO,EACDC,IACAb,EAAe,UAAU,IAAI,UAAU,IAEvCS,IACAT,EAAe,UAAU,OAAO,UAAU,EAC1CE,EAAW,KAAK,GAAGS,CAAK,EACxBE,EAAO,EAAI,EACXC,IAEAT,EAAW,QAAO,EAElB,OAAO,SAAS,CACd,IAAKG,EAAoB,EACzB,SAAU,QAClB,CAAO,EAGP,CAAG,CAEH,CAAC,EAMDX,EAAO,iBAAiB,SAAUU,GAAS,CAMzC,GALAA,EAAM,eAAc,EAGpBH,EADoB,SAAS,eAAe,aAAa,EAChC,MAErBA,EAAW,KAAM,IAAK,GAAI,CAC5BQ,EAAS,KAAK,CACZ,QAAS,sCACT,SAAU,UAChB,CAAK,EACD,MACJ,MACIX,EAAe,EACfQ,IACAC,EAASN,CAAU,EAChB,KAAKO,GAAS,CAEb,GADAT,EAAaS,EACTT,EAAW,SAAW,EACxBO,IACAG,EAAS,MAAM,CACb,QACE,2EACF,SAAU,UACtB,CAAW,EACDC,IACAb,EAAe,UAAU,IAAI,UAAU,UAC9BG,GAAa,GAAI,CAC1BM,IACAI,IACAb,EAAe,UAAU,IAAI,UAAU,EAEvCK,EAAW,QAAO,EAElBO,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UACtB,CAAW,EACD,MACV,MACUH,IACAT,EAAe,UAAU,OAAO,UAAU,EAC1Ca,IAGAR,EAAW,QAAO,CAE5B,CAAO,EACA,MAAMU,GAAS,CACd,QAAQ,IAAIA,CAAK,CACzB,CAAO,CAEP,CAAC,EAID,eAAeL,EAASN,EAAY,CAGlC,MAAMY,EACJ,gCAFc,qCAId,MACA,mBAAmBZ,CAAU,EAC7B,kEAAkEH,EAAa,gBAE3EgB,EAAW,MAAMC,EAAM,IAAKF,CAAG,EACrC,OAAAb,EAAYc,EAAS,KAAK,UACnBA,EAAS,KAAK,IAEvB,CAIA,SAASR,GAAsB,CAC7BX,EAAY,UAAU,OAAO,UAAU,CACzC,CAMA,SAASqB,EAAgBC,EAAM,CAE7B,MAAO;AAAA,eACMA,EAAK;AAAA,kBACFA,EAAK,sBAAsBA,EAAK;AAAA;AAAA;AAAA;AAAA,wBAI1BA,EAAK;AAAA;AAAA;AAAA,wBAGLA,EAAK;AAAA;AAAA;AAAA,2BAGFA,EAAK;AAAA;AAAA;AAAA,4BAGJA,EAAK;AAAA;AAAA;AAAA,SAKjC,CAEA,SAASC,GAAsB,CAC7B,OAAOnB,EAAW,IAAIiB,CAAe,EAAE,KAAK,EAAE,CAChD,CAEA,SAASN,EAAOS,EAAU,GAAO,CAC/B,MAAMC,EAASF,IAEXC,EACFvB,EAAU,mBAAmB,YAAawB,CAAM,EAElDxB,EAAU,UAAYwB,CAGxB,CAGA,SAAST,GAAqB,CACxBZ,EAAW,SAAWC,IACxBH,EAAe,UAAU,IAAI,UAAU,EACvCY,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UAChB,CAAK,EAEL,CAIA,SAASN,GAAe,CAEtB,IAAIkB,EAAU,CACZ,aAAc,MACd,aAAc,IACd,SAAU,EAEd,EAEEnB,EAAa,IAAIoB,EAAe,qBAAsBD,CAAO,EAC7DnB,EAAW,GAAG,sBAAuB,UAAY,CAAE,CAAA,EACnDA,EAAW,QAAO,CACpB"}